************* Module agrotech_ai.websocket_handler
agrotech_ai/websocket_handler.py:55:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/websocket_handler.py:63:19: W0718: Catching too general exception Exception (broad-exception-caught)
agrotech_ai/websocket_handler.py:74:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/websocket_handler.py:86:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/websocket_handler.py:152:4: R0914: Too many local variables (16/15) (too-many-locals)
agrotech_ai/websocket_handler.py:264:15: W0718: Catching too general exception Exception (broad-exception-caught)
agrotech_ai/websocket_handler.py:352:15: W0718: Catching too general exception Exception (broad-exception-caught)
************* Module agrotech_ai.agents
agrotech_ai/agents.py:38:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:83:15: W0718: Catching too general exception Exception (broad-exception-caught)
agrotech_ai/agents.py:46:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:57:16: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:65:16: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:76:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:85:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:95:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:172:8: C0103: Variable name "timeoutReq" doesn't conform to snake_case naming style (invalid-name)
agrotech_ai/agents.py:174:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:217:15: W0718: Catching too general exception Exception (broad-exception-caught)
agrotech_ai/agents.py:182:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:186:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:201:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:204:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:210:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:213:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:214:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:219:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:226:16: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/agents.py:282:15: W0718: Catching too general exception Exception (broad-exception-caught)
agrotech_ai/agents.py:283:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
************* Module agrotech_ai.app
agrotech_ai/app.py:19:0: C0116: Missing function or method docstring (missing-function-docstring)
agrotech_ai/app.py:21:4: W0621: Redefining name 'logger' from outer scope (line 55) (redefined-outer-name)
agrotech_ai/app.py:82:4: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/app.py:85:11: W0718: Catching too general exception Exception (broad-exception-caught)
agrotech_ai/app.py:86:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/app.py:88:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/app.py:121:4: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/app.py:128:4: C0415: Import outside toplevel (uvicorn) (import-outside-toplevel)
agrotech_ai/app.py:131:4: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
************* Module agrotech_ai.ollama_client
agrotech_ai/ollama_client.py:27:0: C0103: Constant name "_shared_session" doesn't conform to UPPER_CASE naming style (invalid-name)
agrotech_ai/ollama_client.py:32:4: W0603: Using the global statement (global-statement)
agrotech_ai/ollama_client.py:55:4: W0603: Using the global statement (global-statement)
agrotech_ai/ollama_client.py:64:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:82:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:83:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:115:15: W0718: Catching too general exception Exception (broad-exception-caught)
agrotech_ai/ollama_client.py:97:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:101:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:102:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:109:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:110:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:117:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:123:16: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:174:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:277:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:282:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:208:4: R0912: Too many branches (20/12) (too-many-branches)
agrotech_ai/ollama_client.py:292:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:293:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:322:15: W0718: Catching too general exception Exception (broad-exception-caught)
agrotech_ai/ollama_client.py:308:16: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:313:20: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:319:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:323:12: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:328:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:386:8: W1203: Use lazy % formatting in logging functions (logging-fstring-interpolation)
agrotech_ai/ollama_client.py:71:0: R0903: Too few public methods (1/2) (too-few-public-methods)
agrotech_ai/ollama_client.py:1:0: R0801: Similar lines in 2 files
==agrotech_ai.agents:[221:235]
==agrotech_ai.ollama_client:[118:136]
            )

            # Reset shared session if connection issues persist
            if "timeout" in str(e).lower() or "connection" in str(e).lower():
                logger.warning(
                    f"üîÑ [{self.role}] Resetting shared session due to "
                    f"connection issues"
                )
                reset_shared_session()
                self.session = get_shared_session()

            return self._get_fallback_response()

    def _get_fallback_response(self) -> Dict[str, Any]: (duplicate-code)
agrotech_ai/ollama_client.py:1:0: R0801: Similar lines in 2 files
==agrotech_ai.agents:[18:27]
==agrotech_ai.ollama_client:[17:26]
OLLAMA_URL = os.getenv("OLLAMA_URL", "http://localhost:11434")
OLLAMA_GENERATE_API = f"{OLLAMA_URL}/api/generate"
MODEL_NAME = "gemma3:4b"
VISION_MODEL_NAME = "qwen2.5vl:3b"  # Modelo para an√°lisis de im√°genes

# Configure logging
logger = logging.getLogger(__name__)

# Shared session pool for all agents (duplicate-code)

------------------------------------------------------------------
Your code has been rated at 8.57/10 (previous run: 8.57/10, +0.00)

